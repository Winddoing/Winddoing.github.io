---
title: HID设备
date: 2018-05-8 23:17:24
categories: 设备驱动
tags: [HID, 驱动]
---


HID

<!--more-->

##

## 鼠标

鼠标的通信格式：4个字节

```
BYTE3 BYTE2 BYTE1 BYTE0
```
| Byte | BIT7 | BIT6 | BIT5 | BIT4 | BIT3 | BIT2 | BIT1 | BIT0 |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| 0   | 1 表示Y坐标的变化量超出－256~255的范围, 0表示没有溢出 | 1表示X坐标的变化量超出－256~255的范围，0表示没有溢出 | Y坐标变化的符号位，1表示负数，即鼠标向下移动 | X   坐标变化的符号位，1表示负数，即鼠标向左移动 | 恒为1 | 1表示中键按下 | 1表示右键按下 | 1表示左键按下 |
| 1 | X坐标变化量，|与byte的|bit4组成|9位符号数,|负数表示向左移，|正数表右移。|用补码|表示变化量|
| 2 | Y坐标变化量，|与byte的|bit5组成|9位符号数，|负数表示向下移，|正数表上移。|用补码|表示变化量 |
| 3 | 滚轮变化。| - | - | - | - | - | - | - |


右键，九次

```
00003d0 0000 0002 0000 0000 0000 0000 0000 0002
00003e0 0000 0000 0000 0000 0000 0002 0000 0000
00003f0 0000 0000 0000 0002 0000 0000 0000 0000
0000400 0000 0002 0000 0000 0000 0000 0000 0002
0000410 0000 0000 0000 0000 0000 0002 0000 0000
0000420 0000 0000 0000 0002 0000 0000 0000 0000
0000430 0000 0002 0000 0000 0000 0000 0000 0002
0000440 0000 0000 0000 0000 0000 0002 0000 0000
0000450 0000 0000 0000 0002 0000 0000 0000 0000
```

鼠标的一次点击，包含`按下`和`抬起`两个动作，这两个动作均会上报事件，`抬起`时上报的全部为`0x0`

## 开发板模拟鼠标



## 调试

`Bus Hound`是一个超级软件总线协议分析器,用于捕捉来自设备的协议包和输入输出操作


## 参考

1. [s3c6410 linux gadget hid驱动](https://blog.csdn.net/hclydao/article/details/9284215)
2. [DM816X 实现 USB HID Gadget 鼠标键盘功能](https://blog.csdn.net/miaopasi_QAQ/article/details/45479709)
3. [linux 读取 USB HID鼠标坐标和点击 在 LCD上显示](https://www.cnblogs.com/ningci/p/6807654.html)
4. [Linux之访问/dev/hidraw](https://blog.csdn.net/qq_33750826/article/details/79397984)
5. [USB与BT HID reports描述符实践与抓包分析](https://blog.csdn.net/sy373466062/article/details/78223563)
6. [usb hid gadget模拟鼠标键盘](https://blog.csdn.net/luckywang1103/article/details/41282551)
