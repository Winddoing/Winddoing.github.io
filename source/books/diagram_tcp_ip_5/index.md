---
title: 图解TCPIP(第5版)
date: 2018-07-21 8:07:24
comments: false
---

* 虚拟化技术：指当一个网站（或者其他系统），需要调整运营所需要的资源时，并不增减服务器、存储设备、网络等实际的物理设备，而是利用软件将这些物理设备虚拟化，在有必要增减资源的时候，通过软件按量增减的一种机制。

* 利用虚拟化技术，根据使用者情况动态的调整必要资源的机制，被人们称之为“云”。

* MAC地址，数据链路层的标识地址，用来标识`同一链路`中不同计算机的一种标识码。
* IP地址，网络层地址，用于在`连接到网络中的所有主机中标识出进行通信的目标地址`。

* 多跳路由：指路由器或主机在转发IP数据包时只指定下一个路由器或主机，而不是将到最终目标地址的所有通路全都指定出来。
> 比如，我们只知道目的地，进行找路一样，每到一个十字路口，向别人打听一下，下一步怎么走。

* 不同数据链路之间的最大区别：`各自的最大传输单位（MTU：Maximum Transmission Unit）`
> 不同的数据链路，好比现实中不同的交通工具一样，运力各不相同
>> 以太网：MTU=1500Byte

* **IP(网络层)，采用`面向无连接`，一是：简化；二是：提速。**

* **IP地址：**
IP地址由“网络标识（网络地址）”和“主机标识（主机地址）”两部分组成。
>IPv4: `32位`, 每8位为一组，最多允许43亿台左右的计算机接入网络。
>
>IPv6: `128位`，一般写成8个16位字节

* IP地址分为四个等级，`A类`、`B类`、`C类`、`D类`，不同的等级代表此网段可以容纳的主机个数，**D类地址没有主机标识，被作为多播（组播）地址**

* 广播无法穿透路由（路由器不转发广播的数据包）。

* IP地址的网络部分用于进行路由控制。

* 在路由跳转中，如果路由表中存在多条相同的网络记录，选择一个最为吻合的网络地址，所谓最为吻合是指相同位数最多的意思（也就是最长匹配）

* 路由：`默认路由`、`主机路由`
> 默认路由： “0.0.0.0/0”或default
>
> 主机路由： "IP地址/32",如192.168.45.21/32是主机路由，表示整个IP的所有位参与路由。

* 回环地址：在同一台计算机上的程序之间进行网络通信时所使用的一个默认地址。回环地址：`172.0.0.1`

* IP报文的分片，主要原因和依据是数据链路的不同，导致MTU的不同所致，因此分片的主要实施者是`主机`或`路由器`（两个不同的链路之间），但是IP报文的重组只有目标主机完成。

* 路径MTU发现：所谓`路径MTU（Path MTU）`，指从发送端主机到接收端主机之间不需要分片时最大的MTU大小，即路径中存在的所有数据链路中最小的MTU。（采用路径MTU后，路由器将不在做分片处理， 只是发送端主机进行分片）

* IPv6的分片处理只作为起点的发送端主机进行，路由器不参与分片。（IPv6中MTU=1280bit）

* `Qos`：Quality Of Serice（服务质量）

* ARP: (Address Resolution Protocol),根据IP地址定位MAC地址
>ARP采用广播实现
* RARP:(Reverse Address Resolution Protocol),根据MAC地址定位IP地址。
> 搭建一个RARP的服务器，在一个设备接入时，RARP会根据提前注册的设备的MAC地址查找出IP，并配置到该设备


* `ICMP`:主要功能
> 确定IP包是否成功送达目标地址,通知在发送过程中IP包被废弃的具体原因，改善网络设置等。
>
>**消息：两类**
>
>a. 一类是通知出错原因的消息；   b. 一类是用于诊断的查询消息

* ICMP消息类型：

| 消息类型（十进制） | 内容                                  |
|:------------------:|:--------------------------------------|
|         0          | 回送应答（Echo Reply）                |
|         3          | 目标不可达（Destination Unreachable） |
|         4          | 原点抑制（Source Quench）             |
|         5          | 重定向或者改变路由（Redirect）        |
|         8          | 回送请求（Echo Request）              |
|         9          | 路由器公告（Router Advertisement）    |
|         10         | 路由器请求（Router Solicitation）     |
|         11         | 超时（Time Exceeded）                 |
|         17         | 地址子网请求（Address Mark Request）  |
|         18         | 地址子网应答（Address Mark Reply）    |

* 在ICMP中，包以文明的形式像TCP/UDP一样通过IP进行传输。

* ICMPv6：在ICMPv6中，从IP地址定位MAC地址的协议ARP转为ICMP的邻居探索消息（Neighbor Discovery）。
> 邻居请求消息利用IPv6的`多播`地址实现传输
* 在ICMPv6中，ICMP大致分为两类，一类是`错误消息`，另一类是`信息消息`

* HDCP: (Dynamic Host Configuration Protocol)自动设置IP地址，统一管理IP地址分配
> 在使用DHCP之前，都有架设一台DHCP服务器，一般由该网段的路由器充当HDCP服务器

* DHCP现实即插即用：指只要物理上一接通，无需进行专门的设置就可以直接使用。

* DHCP功能的实现：主要分两个阶段，在发送DHCP发现包和DHCP请求包时，DHCP即插即用的IP尚未确定。因此，DHCP发现包的目标地址为广播`255.255.255.255`,而源地址为`0.0.0.0`,表示未知。
* DHCP中继代理：对不同网段的IP地址分配，由一个DHCP服务器统一管理和维护。
> DHCP客户端会向DHCP中继代理发送DHCP请求包，而DHCP中继代理在收到这个`广播包`后再以单播的形式发给DHCP服务器。服务器端收到该包以后再向  DHCP中继代理返回应答，并由DHCP中继代理将此包转发给DHCP客户端（单播）。
>
> DHCP包中包含了主机的MAC地址。DHCP中继代理`利用MAC地址使用单播的方式`将包返回给了DHCP客户端

* NAT:(Network Address Translator)是用于在本地网络中使用私有地址，在连接互联网时转而使用全局IP地址的技术。

* 多播：在多播通信中确认接收端是否存在非常重要，是通过`MLD（Multicast Listener Discovery）`实现。它是IPv4中的`IGMP`和IPv6中的`ICMPv6`的功能之一。
